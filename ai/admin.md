# План реализации административной панели для сайта DressCutur

## 1. Общая структура и архитектура

### 1.1. Основная структура

```
app/
├── admin/
│   ├── page.tsx                # Главная страница админки (дашборд)
│   ├── layout.tsx              # Общий лейаут админки
│   ├── auth/                   # Аутентификация
│   │   └── page.tsx            # Страница входа
│   ├── services/               # Управление услугами
│   │   ├── page.tsx            # Список услуг
│   │   └── [id]/page.tsx       # Редактирование услуги
│   ├── fabrics/                # Управление тканями
│   │   ├── page.tsx            # Список тканей
│   │   └── [id]/page.tsx       # Редактирование ткани
│   ├── gallery/                # Управление галереей
│   │   ├── page.tsx            # Список работ
│   │   └── [id]/page.tsx       # Редактирование работы
│   ├── testimonials/           # Управление отзывами
│   │   ├── page.tsx            # Список отзывов
│   │   └── [id]/page.tsx       # Редактирование отзыва
│   ├── prices/                 # Управление ценами
│   │   └── page.tsx            # Страница управления ценами
│   ├── faqs/                   # Управление FAQ
│   │   ├── page.tsx            # Список FAQ
│   │   └── [id]/page.tsx       # Редактирование FAQ
│   ├── contacts/               # Управление заявками
│   │   ├── page.tsx            # Список заявок
│   │   └── [id]/page.tsx       # Просмотр заявки
│   ├── settings/               # Общие настройки
│   │   └── page.tsx            # Настройки сайта
│   └── components/             # Компоненты админки
│       ├── ui/                 # UI компоненты
│       ├── forms/              # Формы для создания/редактирования
│       └── layout/             # Компоненты лейаута
└── api/                        # API роуты
    └── admin/                  # API для админки
        ├── auth/               # Аутентификация
        ├── services/           # CRUD операции для услуг
        ├── fabrics/            # CRUD операции для тканей
        ├── gallery/            # CRUD операции для галереи
        ├── testimonials/       # CRUD операции для отзывов
        ├── prices/             # CRUD операции для цен
        ├── faqs/               # CRUD операции для FAQ
        └── contacts/           # CRUD операции для заявок
```

### 1.2. Технологии и библиотеки

- **Next.js 15** - основа приложения
- **React** - UI библиотека
- **Next Auth** - система аутентификации
- **Prisma** - ORM для работы с базой данных
- **PostgreSQL** - база данных
- **Tailwind CSS** - стилизация
- **ShadcnUI** - готовые компоненты UI
- **React Hook Form** - управление формами
- **Zod** - валидация данных
- **TanStack Query** - управление серверным состоянием и кэширование
- **Uploadthing** - загрузка файлов
- **Framer Motion** - анимации

## 2. Сущности для управления (CRUD)

### 2.1. Услуги (Services)
- **Поля**: 
  - id: unique identifier
  - title: название услуги
  - description: описание услуги
  - icon: иконка услуги (SVG или URL)
  - image: изображение услуги
  - isActive: активна ли услуга
  - order: порядок отображения
  - createdAt: дата создания
  - updatedAt: дата обновления

### 2.2. Ткани (Fabrics)
- **Поля**:
  - id: unique identifier
  - name: название ткани
  - description: описание ткани
  - image: основное изображение
  - category: категория (natural, synthetic, mixed, lining)
  - purpose: назначение (массив: dress, blouse, suit и т.д.)
  - colors: доступные цвета (массив цветовых кодов)
  - price: цена за метр
  - properties: свойства (массив: мягкий, блестящий и т.д.)
  - details: детальная информация
    - composition: состав
    - width: ширина
    - weight: плотность
    - care: правила ухода (массив)
    - origin: страна происхождения
    - description: расширенное описание
  - gallery: галерея изображений (массив URL)
  - recommendations: рекомендации по использованию (массив)
  - isActive: активна ли ткань
  - order: порядок отображения
  - createdAt: дата создания
  - updatedAt: дата обновления

### 2.3. Галерея работ (Gallery)
- **Поля**:
  - id: unique identifier
  - src: URL изображения
  - alt: альтернативный текст
  - category: категория (wedding, suits, evening и т.д.)
  - description: описание работы
  - isNew: новая работа (для выделения)
  - details: детальная информация
    - client: информация о клиенте
    - materials: использованные материалы
    - date: дата создания работы
    - process: описание процесса
  - relatedImages: связанные изображения
  - order: порядок отображения
  - isActive: активна ли запись
  - createdAt: дата создания записи
  - updatedAt: дата обновления записи

### 2.4. Отзывы (Testimonials)
- **Поля**:
  - id: unique identifier
  - name: имя клиента
  - position: статус (постоянный клиент, невеста и т.д.)
  - avatar: фотография клиента
  - text: текст отзыва
  - rating: оценка (1-5)
  - date: дата отзыва
  - category: категория (individual, repair, home и т.д.)
  - isVerified: проверен ли отзыв
  - isActive: отображать ли отзыв
  - order: порядок отображения
  - createdAt: дата создания записи
  - updatedAt: дата обновления записи

### 2.5. Цены (Prices)
- **Поля**:
  - id: unique identifier
  - service: название услуги
  - price: стоимость (с указанием "от")
  - description: дополнительное описание
  - category: категория услуги
  - isActive: активна ли цена
  - order: порядок отображения
  - createdAt: дата создания
  - updatedAt: дата обновления

### 2.6. FAQ (Frequently Asked Questions)
- **Поля**:
  - id: unique identifier
  - category: категория (general, workflow, pricing и т.д.)
  - title: заголовок категории
  - question: вопрос
  - answer: ответ
  - helpful: количество "полезных" оценок
  - notHelpful: количество "неполезных" оценок
  - isActive: активен ли вопрос
  - order: порядок отображения
  - createdAt: дата создания
  - updatedAt: дата обновления

### 2.7. Контактные заявки (Contacts)
- **Поля**:
  - id: unique identifier
  - name: имя клиента
  - email: email клиента
  - phone: телефон клиента
  - subject: тема обращения
  - message: текст сообщения
  - status: статус обработки (new, inProgress, completed, canceled)
  - assignedTo: ответственный сотрудник
  - notes: внутренние заметки
  - fileAttachment: прикрепленный файл
  - createdAt: дата создания
  - updatedAt: дата обновления

### 2.8. Пользователи админки (Users)
- **Поля**:
  - id: unique identifier
  - name: имя пользователя
  - email: email пользователя
  - password: хешированный пароль
  - role: роль (admin, editor)
  - isActive: активен ли пользователь
  - lastLogin: дата последнего входа
  - createdAt: дата создания
  - updatedAt: дата обновления

## 3. Функциональность админ-панели

### 3.1. Аутентификация и авторизация
- Страница входа (логин/пароль)
- Защита маршрутов от неавторизованного доступа
- Управление ролями (админ, редактор)
- Восстановление пароля

### 3.2. Дашборд
- Сводка активности (новые заявки, отзывы)
- Статистика посещений
- Быстрые ссылки для основных разделов
- График новых запросов по дням/неделям

### 3.3. Управление услугами
- Список всех услуг с возможностью фильтрации и поиска
- Создание новой услуги
- Редактирование существующей услуги
- Изменение порядка отображения услуг (drag-n-drop)
- Активация/деактивация услуги
- Удаление услуги

### 3.4. Управление тканями
- Список всех тканей с возможностью фильтрации и поиска
- Создание новой ткани
- Редактирование существующей ткани
- Загрузка и управление изображениями ткани
- Изменение порядка отображения тканей
- Активация/деактивация ткани
- Удаление ткани

### 3.5. Управление галереей
- Список всех работ с возможностью фильтрации по категориям
- Создание новой записи в галерее
- Редактирование существующей записи
- Загрузка и управление изображениями
- Назначение категорий
- Изменение порядка отображения работ
- Активация/деактивация записи
- Удаление записи

### 3.6. Управление отзывами
- Список всех отзывов с возможностью фильтрации и поиска
- Добавление нового отзыва
- Редактирование существующего отзыва
- Модерация отзывов (подтверждение/отклонение)
- Изменение порядка отображения отзывов
- Активация/деактивация отзыва
- Удаление отзыва

### 3.7. Управление ценами
- Список всех цен с возможностью фильтрации
- Добавление новой цены
- Редактирование существующей цены
- Изменение порядка отображения цен
- Активация/деактивация цены
- Удаление цены

### 3.8. Управление FAQ
- Список всех FAQ с группировкой по категориям
- Добавление нового вопроса/ответа
- Редактирование существующего вопроса/ответа
- Изменение порядка отображения вопросов
- Активация/деактивация вопроса
- Удаление вопроса

### 3.9. Управление контактными заявками
- Список всех заявок с возможностью фильтрации и поиска
- Просмотр детальной информации о заявке
- Изменение статуса заявки
- Добавление внутренних заметок
- Назначение ответственного
- Экспорт данных заявок
- Архивирование заявок

### 3.10. Настройки
- Управление пользователями админки
- Общие настройки сайта (логотип, контактная информация)
- Настройки SEO (метатеги, OG-теги)
- Управление бэкапами данных

## 4. Дизайн и UI

### 4.1. Лейаут админки
- Боковое меню с разделами
- Верхняя панель с поиском, уведомлениями и профилем
- Хлебные крошки для навигации
- Адаптивный дизайн для планшетов и мобильных устройств

### 4.2. Компоненты пользовательского интерфейса
- Таблицы данных с сортировкой, фильтрацией и пагинацией
- Формы создания и редактирования с валидацией
- Модальные окна для быстрых действий
- Индикаторы загрузки и обработки данных
- Уведомления о результатах операций
- Drag-n-drop интерфейс для изменения порядка элементов
- Предпросмотр загружаемых изображений

## 5. API и работа с данными

### 5.1. REST API
- Разработка эндпоинтов для каждой сущности (CRUD операции)
- Защита API с помощью аутентификации
- Валидация входящих данных
- Обработка ошибок и возврат соответствующих кодов статуса

### 5.2. Безопасность
- Защита от CSRF атак
- Защита от XSS атак
- Ограничение количества запросов (rate limiting)
- Проверка авторизации для всех действий

### 5.3. Загрузка файлов
- Интеграция с сервисом загрузки файлов (Uploadthing или аналог)
- Оптимизация загружаемых изображений
- Проверка типов файлов и ограничение размеров
- Загрузка нескольких файлов с предпросмотром

## 6. База данных

### 6.1. Схема данных
- Определение моделей данных с помощью Prisma
- Настройка связей между таблицами
- Индексы для оптимизации запросов
- Валидация данных на уровне схемы

### 6.2. Миграции
- Создание начальной схемы базы данных
- Управление миграциями при изменении схемы
- Сидинг тестовых данных

## 7. Поэтапный план разработки

### Этап 1: Настройка проекта и авторизация
1. Установка необходимых зависимостей
2. Настройка Prisma и подключение к базе данных
3. Создание базовых моделей данных
4. Реализация системы аутентификации
5. Создание базового лейаута админки

### Этап 2: Разработка основных CRUD операций
1. Разработка управления услугами
2. Разработка управления тканями
3. Разработка управления галереей
4. Разработка управления отзывами
5. Разработка управления FAQ

### Этап 3: Разработка дополнительной функциональности
1. Разработка управления контактными заявками
2. Разработка управления ценами
3. Разработка дашборда с статистикой
4. Реализация загрузки и управления файлами

### Этап 4: Оптимизация и тестирование
1. Оптимизация запросов к базе данных
2. Реализация кэширования данных
3. Тестирование всех функций администратора
4. Проверка безопасности и исправление уязвимостей

### Этап 5: Интеграция и запуск
1. Интеграция админки с фронтендом сайта
2. Настройка деплоя и окружения
3. Финальное тестирование
4. Создание документации для администраторов

## 8. Дополнительные возможности для будущего развития

1. **Аналитика и отчеты**
   - Расширенная статистика по посещаемости
   - Отчеты по эффективности различных секций сайта
   - Экспорт данных в различные форматы

2. **Многоязычность**
   - Управление контентом на разных языках
   - Переключение языка интерфейса админки

3. **Расширенное управление медиа**
   - Библиотека медиафайлов с тегами и категориями
   - Редактор изображений в админке

4. **Маркетинговые инструменты**
   - Управление акциями и спецпредложениями
   - A/B тестирование элементов интерфейса

5. **Интеграция с внешними сервисами**
   - CRM системы для управления клиентами
   - Системы аналитики (Google Analytics, Яндекс.Метрика)
   - Платежные системы для онлайн-оплаты услуг 